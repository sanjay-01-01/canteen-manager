{% extends "base.html" %}

{% block title %}Report - {{ canteen.name }}{% endblock %}

{% block content %}
    <h2>üìä Report for {{ canteen.name }}</h2>
    <p>Location: {{ canteen.location }} | Total Staff: {{ staff_count }}</p>
    <hr>

    <h3>üí∞ Total Expenses: ‚Çπ {{ total_canteen_expense|floatformat:2 }}</h3>

    <h4>Detailed Expense Breakdown</h4>
    
    {% if detailed_expenses %}
    <table border="1" cellpadding="10" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>Date</th>
                <th>Category</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Quantity</th>
            </tr>
        </thead>
        <tbody>
        {% for expense in detailed_expenses %}
            <tr>
                <td>{{ expense.date }}</td>
                <td>{{ expense.get_category_display }}</td> 
                <td>{{ expense.description }}</td>
                <td>‚Çπ {{ expense.amount|floatformat:2 }}</td>
                <td>{{ expense.quantity|floatformat:2 }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p>No expenses recorded for this canteen yet. Please add data via the Admin Panel.</p>
    {% endif %}

    <br><a href="{% url 'home_dashboard' %}">‚Üê Back to Dashboard</a>
{% endblock content %}